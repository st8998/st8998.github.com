<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>Some HTML CSS Experiments</title>
    <link rel="stylesheet/less" href="stylesheets/vk.less" type="text/css"/>
    <script src="../javascripts/less-1.0.36.min.js" type="text/javascript"></script>
    <script src="../javascripts/jquery.js" type="text/javascript"></script>
    <script src="../javascripts/jquery.tmpl.js" type="text/javascript"></script>
</head>
<body>
<div id="wrapper">
    <div id="header">
        <form action="#">
            <input type="text" placeholder="Поиск"/>
        </form>
        <ul id="topNav">
            <li><a href="#">главная</a></li>
            <li><a href="#">быстрые сообщения</a></li>
            <li><a href="#">группы</a></li>
            <li><a href="#">люди</a></li>
            <li><a href="#">приложения</a></li>
            <li><a href="#">выйти</a></li>
        </ul>
    </div>
    <div id="content">
        <ul id="leftNav">
            <li><a href="#" class="selfPage">Моя Страница</a><a href="#" class="utility">ред.</a></li>
            <li><a href="#">Мои Друзья</a></li>
            <li><a href="#">Мои Фотографии</a></li>
            <li><a href="#">Мои Видеозаписи (<span>16</span>)</a></li>
            <li><a href="#">Мои Аудиозаписи</a></li>
            <li><a href="#">Мои Сообщения</a></li>
            <li><a href="#">Мои Заметки</a></li>
            <li><a href="#">Мои Группы (<span>116</span>)</a></li>
            <li><a href="#">Мои Встречи (<span>95</span>)</a></li>
            <li><a href="#">Мои Новости</a></li>
            <li><a href="#">Мои Настройки</a></li>
            <li class="divided"><a href="#">Приложения (<span>38</span>)</a></li>
            <li><a href="#">Объявления</a></li>
        </ul>
        <div id="main">
            <h1>Иван Ефремов <span class="utility">(это Вы)</span><span class="status">Онлайн</span></h1>

            <div id="shortInfo">
                <img src="images/avatar.jpg" id="avatar">
                <ul id="mediaNav">
                    <li><a href="#">Фотографии со мной (26)</a></li>
                    <li><a href="#">Видеозаписи со мной (3)</a></li>
                    <li><a href="#">Редактировать страницу</a></li>
                    <li><a href="#">Повысить рейтинг</a></li>
                    <li><a href="#">Изменить фотографию</a></li>
                </ul>
                <div id="ratingBar">
                    <div id="leftSide" style="width: 82%;"></div>
                    <p>82%</p>
                </div>
                <ul id="ratingNav">
                    <li><a class="contacts" href="#">Добавить контакты</a> <span>(+10%)</span></li>
                    <li><a class="places" href="#">Добавить места</a> <span>(+10%)</span></li>
                    <li><a class="hobbies" href="#">Заполнить увлечения</a> <span>(+10%)</span></li>
                    <li><a class="about" href="#">Рассказать о себе</a> <span>(+10%)</span></li>
                </ul>
                <div class="section">
                    <h2>Друзья <span>(74)</span> <a href="#">Обновления</a></h2>

                    <div class="body">
                        <div class="info"><a href="#">Друзья (74)</a><a href="#" class="all">Все</a></div>
                        <a href="#" class="friend"><img src="images/friend1.jpg"><span>Дмитрий Карягин</span></a>
                        <a href="#" class="friend"><img src="images/friend2.jpg"><span>Олька Гатауллина</span></a>
                        <a href="#" class="friend"><img src="images/friend3.jpg"><span>Михаил Новицкий</span></a>
                        <a href="#" class="friend"><img src="images/friend4.jpg"><span>Наталья Лисицына</span></a>
                        <a href="#" class="friend"><img src="images/friend5.jpg"><span>РАмео Игнатенко</span></a>
                        <a href="#" class="friend"><img src="images/friend6.jpg"><span>svetlana Repalova</span></a>
                    </div>
                </div>
                <div class="section">
                    <h2>Друзья онлайн <span>(4)</span></h2>

                    <div class="body">
                        <div class="info"><a href="#">Друзья онлайн (4)</a><a href="#" class="all">Все</a></div>
                        <a href="#" class="friend"><img src="images/friend1.jpg"><span>Дмитрий Карягин</span></a>
                        <a href="#" class="friend"><img src="images/friend2.jpg"><span>Олька Гатауллина</span></a>
                        <a href="#" class="friend"><img src="images/friend3.jpg"><span>Михаил Новицкий</span></a>
                        <a href="#" class="friend"><img src="images/friend4.jpg"><span>Наталья Лисицына</span></a>
                    </div>
                </div>
                <div class="section">
                    <h2>Фотографии <span>(4 альбома)</span></h2>

                    <div class="body">
                        <div class="info">2 альбома из <a href="#">четырех</a><a href="#" class="all">Все</a></div>
                        <div class="album">
                            <a href="#">
                                <img src="images/photo1.jpg">

                                <h3>KFOR 2</h3>
                            </a>

                            <p>Создан 20 июня 2008</p>
                        </div>
                        <div class="album">
                            <a href="#">
                                <img src="images/photo2.jpg">

                                <h3>Разное</h3>
                            </a>

                            <p>Обновлен 6 ноября 2010</p>
                        </div>
                    </div>
                </div>
                <div class="section">
                    <h2>Видео <span>(4 видеозаписи)</span></h2>

                    <div class="body">
                        <div class="info">2 видеозаписи из <a href="#">четырех</a><a href="#" class="all">Все</a></div>
                        <div class="video">
                            <a href="#">
                                <img src="images/video1.jpg">

                                <h3>Top GEar о Лада Калина</h3>
                            </a>

                            <p>26 мая в 23:41 | <a href="#">0 комментариев</a></p>
                        </div>
                        <div class="video">
                            <a href="#">
                                <img src="images/video2.jpg">

                                <h3>Вирус в компе</h3>
                            </a>

                            <p>3 апр в 21:54 | <a href="#">0 комментариев</a></p>
                        </div>
                    </div>
                </div>
                <div class="section">
                    <h2>Приложения <span>(2)</span></h2>

                    <div class="body">
                        <div class="info">2 приложения <a href="#" class="all">Все</a></div>
                    </div>
                </div>
                <div class="section">
                    <h2>Группы <span>(15)</span> <a href="#">Обновления</a></h2>

                    <div class="body">
                        <div class="info">15 групп <a href="#" class="all">Все</a></div>
                    </div>
                </div>
            </div>

            <div id="profile">
                <div class="section">
                    <h2>Аудиозаписи <span>(159 аудиозаписей)</span> <a href="#">Редактировать</a></h2>

                    <div class="body">
                        <div class="info">3 аудиозаписи из <a href="#">159</a><a href="#" class="all">Все</a></div>
                        <div class="audio">
                            <audio preload="none" src="http://cs4706.vkontakte.ru/u101290445/audio/850989dd3022.mp3"></audio>
                            <a class="control" href="javascript: void(0);"></a>

                            <div class="caption"><a href="#" class="artist">Слава</a> - Одиночество-сука<span
                                    class="time">3:00</span></div>
                            <div class="progress">
                                <div class="loaded"></div>
                                <div class="pointer"></div>
                            </div>
                            <div class="volume">
                                <div class="pointer"></div>
                            </div>
                        </div>
                        <div class="audio">
                            <audio preload="none" src="http://cs1055.vkontakte.ru/u1359605/audio/15ce4d9e67d3.mp3"></audio>
                            <a class="control" href="javascript: void(0);"></a>

                            <div class="caption"><a href="#" class="artist">Ю.Г.</a> - Надо достать себе пушку...<span
                                    class="time">1:36</span></div>
                            <div class="progress">
                                <div class="loaded"></div>
                                <div class="pointer"></div>
                            </div>
                            <div class="volume">
                                <div class="pointer"></div>
                            </div>
                        </div>
                        <div class="audio">
                            <audio preload="none" src="http://cs4712.vkontakte.ru/u18138615/audio/1de7ee41fb7c.mp3"></audio>
                            <a class="control" href="javascript: void(0);"></a>

                            <div class="caption"><a href="#" class="artist">50 Cent - Wanksta</a> - Русский перевод
                                озвучка Кукурузо<span class="time">3:31</span></div>
                            <div class="progress">
                                <div class="loaded"></div>
                                <div class="pointer"></div>
                            </div>
                            <div class="volume">
                                <div class="pointer"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(function() {
        $('div.section h2').click(function() {
            $(this).toggleClass('closed').siblings('.body').slideToggle('fast');
        });

        $('div.audio').each(function() {
            var $container = $(this);
            var $audio = $container.find('audio');
            var audio = $audio.get(0);

            var $progress = $container.find('.progress');
            var $loaded = $progress.find('.loaded');
            var $pointer = $progress.find('.pointer');

            var $control = $container.find('.control');

            var url = $container.data('audio-url');

            $audio.bind({
                'progress': function() {
                    if ((audio.buffered != undefined) && (audio.buffered.length != 0)) {
                        var loaded = audio.buffered.end(0) / audio.duration;
                        $loaded.width(Math.round($progress.width() * loaded));
                        console.log();
                    }
                },
                'timeupdate': function() {
                    var pos = audio.currentTime / audio.duration;
                    $pointer.css('left', Math.round(($progress.width() - 15) * pos) + 'px')
                },
                'ended': function() {
                    $container.next().triggerHandler('click.player');
                }
            });

            $control.bind('click.player', function() {
                if ($container.hasClass('paused')) {
                    audio.play();
                    $container.removeClass('paused').addClass('active');
                } else if ($container.hasClass('active')) {
                    audio.pause();
                    $container.addClass('paused').removeClass('active');
                } else {
                    audio.play();
                    $container.addClass('active').siblings('.active,.paused').removeClass('active paused').find('audio').each(function() {
                        this.pause();
                    });
                }
            });

        });


    });
</script>
</body>
</html>
